(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[159],{1165:function(e,t,r){Promise.resolve().then(r.bind(r,8161))},8161:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var a=r(7437),s=r(2265),i=r(6463),n=r(4392),l=r(495),o=r(6013),d=r(3102),c=r(7135),u=r(3146),f=r(311),m=r(3274),p=r(1266),h=r(2468);let g=(0,n.createClientComponentClient)();function x(){let[e,t]=(0,s.useState)(!0),[r,n]=(0,s.useState)(!1),[x,v]=(0,s.useState)({full_name:"",email:"",phone:"",bio:"",address:"",city:"",district:"",upazila:""}),[b,y]=(0,s.useState)(null),[j,N]=(0,s.useState)(""),w=(0,i.useRouter)(),{toast:_}=(0,f.pm)();(0,s.useEffect)(()=>{(async()=>{try{let{data:{user:e}}=await g.auth.getUser();if(!e){w.push("/");return}let{data:t,error:r}=await g.from("profiles").select("*").eq("id",e.id).single();if(r)throw r;v({full_name:t.full_name||"",email:t.email||"",phone:t.phone||"",bio:t.bio||"",address:t.address||"",city:t.city||"",district:t.district||"",upazila:t.upazila||""}),t.avatar_url&&N(t.avatar_url)}catch(e){console.error("Error fetching profile:",e),_({title:"Error",description:"Failed to load profile. Please try again.",variant:"destructive"})}finally{t(!1)}})()},[w,_]);let k=e=>{let{name:t,value:r}=e.target;v(e=>({...e,[t]:r}))},S=async e=>{e.preventDefault(),n(!0);try{let{data:{user:e}}=await g.auth.getUser();if(!e)throw Error("User not authenticated");let t=j;if(b){let r=b.name.split(".").pop(),a="".concat(e.id,"-").concat(Math.random().toString(36).substring(2,15),".").concat(r),s="avatars/".concat(a),{error:i}=await g.storage.from("avatars").upload(s,b);if(i)throw i;let{data:{publicUrl:n}}=g.storage.from("avatars").getPublicUrl(s);t=n}let{error:r}=await g.from("profiles").update({full_name:x.full_name,phone:x.phone,bio:x.bio,address:x.address,city:x.city,district:x.district,upazila:x.upazila,...t&&{avatar_url:t},updated_at:new Date().toISOString()}).eq("id",e.id);if(r)throw r;_({title:"Success!",description:"Your profile has been updated.",variant:"default"}),w.push("/profile")}catch(e){console.error("Error updating profile:",e),_({title:"Error",description:"Failed to update profile. Please try again.",variant:"destructive"})}finally{n(!1)}};return e?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)(m.Z,{className:"h-8 w-8 animate-spin text-orange-500"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 py-12 px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)(l.z,{variant:"ghost",onClick:()=>w.back(),className:"flex items-center gap-2 mb-6",children:[(0,a.jsx)(p.Z,{className:"h-4 w-4"}),"Back to Profile"]}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Edit Profile"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:"Update your personal information and preferences."})]}),(0,a.jsxs)(o.Zb,{className:"border-0 shadow-lg",children:[(0,a.jsxs)(o.Ol,{children:[(0,a.jsx)(o.ll,{children:"Profile Information"}),(0,a.jsx)(o.SZ,{children:"Update your account's profile information and email address."})]}),(0,a.jsx)(o.aY,{children:(0,a.jsxs)("form",{onSubmit:S,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-4",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"h-24 w-24 rounded-full bg-gray-200 dark:bg-gray-700 overflow-hidden",children:j?(0,a.jsx)("img",{src:j,alt:"Profile",className:"h-full w-full object-cover"}):(0,a.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-orange-500 to-teal-500 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-2xl font-bold",children:x.full_name?x.full_name[0].toUpperCase():"U"})})}),(0,a.jsxs)("label",{htmlFor:"avatar",className:"absolute -bottom-2 -right-2 bg-white dark:bg-gray-800 p-2 rounded-full shadow-md cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-700 dark:text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,a.jsx)("input",{id:"avatar",name:"avatar",type:"file",className:"hidden",accept:"image/*",onChange:e=>{if(e.target.files&&e.target.files[0]){let t=e.target.files[0];y(t),N(URL.createObjectURL(t))}}})]})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Click on the camera to change your profile picture"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"full_name",children:"Full Name"}),(0,a.jsx)(d.I,{id:"full_name",name:"full_name",value:x.full_name,onChange:k,placeholder:"John Doe",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(d.I,{id:"email",name:"email",type:"email",value:x.email,onChange:k,placeholder:"you@example.com",required:!0,disabled:!0,className:"bg-gray-100 dark:bg-gray-800"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"bio",children:"Bio"}),(0,a.jsx)(u.g,{id:"bio",name:"bio",value:x.bio,onChange:k,placeholder:"Tell us about yourself and your love for pets...",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"phone",children:"Phone Number"}),(0,a.jsx)(d.I,{id:"phone",name:"phone",type:"tel",value:x.phone,onChange:k,placeholder:"+8801XXXXXXXXX"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"district",children:"District"}),(0,a.jsx)(d.I,{id:"district",name:"district",value:x.district,onChange:k,placeholder:"e.g., Dhaka, Chittagong"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"city",children:"City"}),(0,a.jsx)(d.I,{id:"city",name:"city",value:x.city,onChange:k,placeholder:"e.g., Dhaka, Chittagong"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"upazila",children:"Upazila/Thana"}),(0,a.jsx)(d.I,{id:"upazila",name:"upazila",value:x.upazila,onChange:k,placeholder:"e.g., Gulshan, Mirpur"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c._,{htmlFor:"address",children:"Address"}),(0,a.jsx)(u.g,{id:"address",name:"address",value:x.address,onChange:k,placeholder:"Your full address",rows:2})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,a.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>w.back(),disabled:r,children:"Cancel"}),(0,a.jsx)(l.z,{type:"submit",disabled:r,children:r?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Saving..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.Z,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})]})]})})]})]})})}},495:function(e,t,r){"use strict";r.d(t,{z:function(){return l}});var a=r(7437),s=r(2265),i=r(1538),n=r(7440);let l=s.forwardRef((e,t)=>{let{className:r,variant:s="default",size:l="default",asChild:o=!1,...d}=e,c=o?i.g7:"button",u=(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"}[s],{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}[l],r);return(0,a.jsx)(c,{className:u,ref:t,...d})});l.displayName="Button"},6013:function(e,t,r){"use strict";r.d(t,{Ol:function(){return l},SZ:function(){return d},Zb:function(){return n},aY:function(){return c},ll:function(){return o}});var a=r(7437),s=r(2265),i=r(7440);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});n.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},3102:function(e,t,r){"use strict";r.d(t,{I:function(){return n}});var a=r(7437),s=r(2265),i=r(7440);let n=s.forwardRef((e,t)=>{let{className:r,type:s,...n}=e;return(0,a.jsx)("input",{type:s,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});n.displayName="Input"},7135:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(7437),s=r(2265),i=r(8364),n=r(2218),l=r(7440);let o=(0,n.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(i.f,{ref:t,className:(0,l.cn)(o(),r),...s})});d.displayName=i.f.displayName},3146:function(e,t,r){"use strict";r.d(t,{g:function(){return n}});var a=r(7437),s=r(2265),i=r(7440);let n=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...s})});n.displayName="Textarea"},311:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(2265);let s=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},7440:function(e,t,r){"use strict";r.d(t,{cn:function(){return i}});var a=r(4839),s=r(6164);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}},1266:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(8030).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6463:function(e,t,r){"use strict";var a=r(1169);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})},8364:function(e,t,r){"use strict";r.d(t,{f:function(){return l}});var a=r(2265),s=r(5171),i=r(7437),n=a.forwardRef((e,t)=>(0,i.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));n.displayName="Label";var l=n}},function(e){e.O(0,[794,545,971,23,744],function(){return e(e.s=1165)}),_N_E=e.O()}]);